!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n="undefined"!=typeof globalThis?globalThis:n||self).acejs={})}(this,function(n){"use strict";const e=new Map;function t(n){return null!==n&&"object"==typeof n&&!Array.isArray(n)}function o(n,e){const t=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();null==e?this.removeAttribute(t):this.setAttribute(t,e.toString())}function i(n,e,t=!1){return n.shadowRoot?t?Array.from(n.shadowRoot.querySelectorAll(e))||null:n.shadowRoot.querySelector(e):null}const r=new WeakMap,u=new Set;let d=null,c=!1;function l(n,e){if(!d)return;let t=r.get(n);t||(t=new Map,r.set(n,t));let o=t.get(e);o||(o=new Set,t.set(e,o)),o.add(d)}function s(n,e){const t=r.get(n);if(!t)return;const o=t.get(e);o&&o.forEach(n=>u.add(n)),c||(c=!0,queueMicrotask(()=>{u.forEach(n=>n()),u.clear(),c=!1}))}function f(n,e){return t(n)?new Proxy(n,{get(n,o,i){const r=Reflect.get(n,o,i);return e?.deep&&t(r)?f(r,e):(l(n,o),r)},set(n,e,t,o){if(Reflect.get(n,e,o)===t)return!0;const i=Reflect.set(n,e,t,o);return s(n,e),i}}):n}n.attribute=function(n,e){if("field"!==e.kind)throw new Error(`@attribute can only be used on fields, not on "${e.kind}"`);e.addInitializer(function(){const n=e.name,t=f({value:this[n]});o.call(this,n,t.value),Object.defineProperty(this,n,{get:()=>t.value,set(e){e!==t.value&&(t.value=e,o.call(this,n,e))}})})},n.bound=function(n,e){if("method"!==e.kind)throw new Error(`@bound can only be used on methods, not on "${e.kind}"`);e.addInitializer(function(){this[e.name]=this[e.name].bind(this)})},n.computed=function(n,e){if("field"!==e.kind)throw new Error(`@computed can only be used on fields, not on "${e.kind}"`);e.addInitializer(function(){const n=function(n){let e,t=!0;const o=()=>{t=!0,s(i,"value")},i=f({get value(){return t&&(d=o,e=n(),d=null,t=!1),l(i,"value"),e}});return i}(this[e.name].bind(this));Object.defineProperty(this,e.name,{get:()=>n.value})})},n.customElement=function(n){return function(e,t){if("class"!==t.kind)throw new Error(`@customElement can only be used on classes, not on "${t.kind}"`);t.addInitializer(()=>customElements.define(n,e))}},n.effect=function(n,e){if("method"!==e.kind)throw new Error(`@effect can only be used on methods, not on "${e.kind}"`);e.addInitializer(function(){const e=n.bind(this);queueMicrotask(()=>{return d=n=e,n(),void(d=null);var n})})},n.inject=function(n){return function(t,o){return"field"===o.kind?()=>e.get(n):"method"===o.kind?function(...o){const i=e.get(n);return t.apply(this,[...o,i])}:void 0}},n.property=function(n,e){if("field"!==e.kind)throw new Error(`@property can only be used on fields, not on "${e.kind}"`);e.addInitializer(function(){const n=f({value:this[e.name]});Object.defineProperty(this,e.name,{get:()=>n.value,set:e=>{n.value=e}})})},n.provide=function(n){return function(t,o){if("class"!==o.kind)throw new Error(`@Service can only be used on classes, not on "${o.kind}"`);e.set(n,new t)}},n.query=function(n){return function(e,t){if("field"!==t.kind)throw new Error(`@query can only be used on fields, not on "${t.kind}"`);t.addInitializer(function(){Object.defineProperty(this,t.name,{get:function(){return i(this,n,!1)},configurable:!0,enumerable:!0})})}},n.queryAll=function(n){return function(e,t){if("field"!==t.kind)throw new Error(`@queryAll can only be used on fields, not on "${t.kind}"`);t.addInitializer(function(){Object.defineProperty(this,t.name,{get:function(){return i(this,n,!0)},configurable:!0,enumerable:!0})})}},n.state=function(n,e){if("field"!==e.kind)throw new Error(`@state can only be used on fields, not on "${e.kind}"`);return(n,e={})=>f(n,e)}});
//# sourceMappingURL=acejs.min.js.map
